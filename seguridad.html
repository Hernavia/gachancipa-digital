<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Hernavia — Prueba de Seguridad</title>

  <!-- ===========================
       META-HEADERS DE SEGURIDAD
       (Lo máximo posible desde HTML estático)
       =========================== -->

  <!-- HSTS (nota: HSTS funciona realmente como header; el meta es un intento de señalizar) -->
  <meta http-equiv="Strict-Transport-Security" content="max-age=31536000; includeSubDomains; preload">

  <!-- Content Security Policy: muy restrictiva. 
       Permite solo recursos 'self' (mismo origen). 
       Ajusta si necesitas fuentes externas o CDNs. -->
  <meta http-equiv="Content-Security-Policy"
    content="
      default-src 'self';
      script-src 'self';
      style-src 'self';
      img-src 'self' data:;
      font-src 'self';
      connect-src 'self';
      frame-ancestors 'none';
      object-src 'none';
      base-uri 'self';
      form-action 'self';
      upgrade-insecure-requests;">
  
  <!-- X-Frame-Options: evita clickjacking -->
  <meta http-equiv="X-Frame-Options" content="DENY">

  <!-- Evita MIME sniffing -->
  <meta http-equiv="X-Content-Type-Options" content="nosniff">

  <!-- Referrer Policy -->
  <meta name="referrer" content="strict-origin-when-cross-origin">

  <!-- Permissions Policy (antes Feature-Policy): restringe APIs del navegador -->
  <meta http-equiv="Permissions-Policy" content="
    geolocation=(),
    microphone=(),
    camera=(),
    payment=(),
    usb=(),
    magnetometer=(),
    gyroscope=(),
    accelerometer=(),
    fullscreen=(self)
  ">

  <!-- Cross-Origin policies (mejor aplicarlas como headers; usamos meta para señalizar) -->
  <meta http-equiv="Cross-Origin-Embedder-Policy" content="require-corp">
  <meta http-equiv="Cross-Origin-Opener-Policy" content="same-origin">
  <meta http-equiv="Cross-Origin-Resource-Policy" content="same-origin">

  <!-- Content-Security-Policy Report (opcional): apunta a tu endpoint de reporte si tienes uno)
       (no se incluye aquí; si tienes endpoint, añade `report-uri` o `report-to`) -->

  <!-- ===========================
       META INFORMATIVAS Y SEO BÁSICO
       =========================== -->
  <meta name="description" content="Hernavia — Prueba de seguridad y encabezados fuertes para GitHub Pages." />
  <link rel="canonical" href="https://hernavia.github.io/gachancipa-digital/" />

  <!-- ===========================
       ESTILOS: todo interno, servidos desde el mismo origen.
       Evitamos 'unsafe-inline' en CSP, por eso usamos archivo CSS si es posible.
       Aquí incluimos un pequeño CSS en bloque — si activas CSP muy restrictiva,
       este <style> puede bloquearse. En ese caso mueve el CSS a un archivo .css en el repo.
       =========================== -->
  <style>
    /* Si tu CSP prohíbe style-src 'unsafe-inline', entonces NO uses este styleblock:
       crea un archivo styles.css en la raíz y enlázalo: <link rel="stylesheet" href="/styles.css"> */
    :root{--bg:#0b1221;--card:#0f1724;--accent:#00b386;--text:#e6eef6}
    html,body{height:100%;margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial}
    body{background:linear-gradient(180deg,#051017,#081827);color:var(--text);display:flex;align-items:center;justify-content:center;padding:2rem}
    .card{background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));border-radius:14px;padding:24px;max-width:900px;width:100%;box-shadow:0 8px 24px rgba(0,0,0,0.6);border:1px solid rgba(255,255,255,0.03)}
    h1{margin:0 0 8px;font-size:1.5rem}
    p{margin:0 0 12px;line-height:1.45}
    pre{background:#041222;padding:12px;border-radius:8px;overflow:auto;font-size:0.85rem}
    .good{color:#9ef0c6}
    .warn{color:#ffd59b}
    .bad{color:#ff9b9b}
    .list{display:grid;gap:8px;margin-top:12px}
    a.btn{display:inline-block;padding:8px 12px;border-radius:8px;background:var(--accent);color:#022; font-weight:700;text-decoration:none}
  </style>

  <!-- ===========================
       POLÍTICA DE PRIVACIDAD/BOTÓN DE CONTACTO (ejemplo)
       =========================== -->
  <meta name="robots" content="noindex,nofollow"> <!-- evita indexación en pruebas; quitar en producción -->

</head>
<body>
  <main class="card" role="main" aria-labelledby="title">
    <h1 id="title">Hernavia — Página de prueba de seguridad</h1>
    <p>Este archivo incorpora <strong>las medidas de seguridad aplicables desde un HTML estático en GitHub Pages</strong>: CSP restrictiva, HSTS (meta), X-Frame-Options, X-Content-Type-Options, Referrer-Policy, Permissions-Policy y políticas cross-origin señaladas.</p>

    <section aria-labelledby="how">
      <h2 id="how">Qué hace este archivo</h2>
      <ul class="list">
        <li><strong class="good">CSP estricta</strong> — bloquea scripts, estilos, imágenes y recursos externos distintos al propio origen.</li>
        <li><strong class="good">Previene clickjacking</strong> (X-Frame-Options: DENY).</li>
        <li><strong class="good">Evita MIME sniffing</strong> (nosniff).</li>
        <li><strong class="warn">Señaliza HSTS</strong> (para HSTS real, configurar header en servidor o Cloudflare).</li>
        <li><strong class="warn">Cross-Origin policies</strong> (COEP/COOP/CORP señaladas; funcionan mejor como headers reales).</li>
      </ul>
    </section>

    <section aria-labelledby="test">
      <h2 id="test">Cómo probar</h2>
      <p>Pasa tu URL por estas herramientas después de subir este archivo:</p>
      <ul>
        <li><a class="btn" href="https://observatory.mozilla.org/" target="_blank" rel="noopener">Mozilla Observatory</a></li>
        <li style="margin-left:8px"><a class="btn" href="https://securityheaders.com/" target="_blank" rel="noopener">SecurityHeaders</a></li>
        <li style="margin-left:8px"><a class="btn" href="https://sitecheck.sucuri.net/" target="_blank" rel="noopener">Sucuri SiteCheck</a></li>
      </ul>
      <p style="margin-top:10px">Si tu CSP es tan restrictiva que bloquea recursos legítimos (fuentes, analytics, CDN), ajusta <code>font-src</code>, <code>img-src</code> o <code>connect-src</code> para permitir origenes de confianza.</p>
    </section>

    <section aria-labelledby="notes">
      <h2 id="notes">Notas técnicas importantes</h2>
      <p><strong>Limitaciones:</strong></p>
      <ul>
        <li>Algunas cabeceras (HSTS, Expect-CT, Report-To, Strict-Transport-Security real, Access-Control-Allow-Origin en forma restringida) <strong>solo se pueden aplicar desde la respuesta HTTP del servidor</strong> o mediante Cloudflare/Netlify/Vercel. El uso de meta-equivalentes ayuda, pero no reemplaza un header real.</li>
        <li>Si usas <code>&lt;style&gt;</code> o <code>&lt;script&gt;</code> inline, la CSP estricta de arriba te bloqueará. Para mantener CSP estricta, mueve CSS/JS a archivos servidos desde el mismo repo (misma origin).</li>
        <li>Para puntuaciones máximas en SSL Labs / Observatory, conecta un dominio propio y configura cabeceras a nivel de servidor o usa Cloudflare con Workers/Rules para inyectar cabeceras.</li>
      </ul>
    </section>

    <section aria-labelledby="footer" style="margin-top:14px">
      <h2 id="footer">Contenido de prueba</h2>
      <p>Texto de prueba — si ves esta página, el HTML se sirve correctamente desde GitHub Pages. Para testear bloqueo de recursos externos, intenta agregar un script externo o una imagen desde un dominio distinto y verás que la CSP lo bloquea.</p>

      <pre>
        <!-- Ejemplo: este script externo sería bloqueado por CSP actual -->
        &lt;script src="https://example.com/evil.js"&gt;&lt;/script&gt;
      </pre>

      <p>Para finalizar: si quieres que yo mismo adapte la CSP a los servicios que usas (Google Fonts, analytics, CDN de imágenes, etc.), dime qué orígenes necesitas y te devuelvo la versión ajustada.</p>
    </section>
  </main>
</body>
</html>
